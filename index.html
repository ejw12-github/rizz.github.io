<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minecraft Tellraw Generator</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #1e1e1e;
      color: white;
    }
    textarea, input, button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      font-family: monospace;
    }
    #output {
      white-space: pre-wrap;
      background: #2e2e2e;
      padding: 10px;
      border-radius: 5px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h1>Minecraft Tellraw Generator</h1>
<label for="inputText">Enter text with color codes (e.g., &4&lHello &rWorld):</label>
<textarea id="inputText" rows="4" placeholder="&4&lHello &rWorld"></textarea>
<button onclick="generateTellraw()">Generate /tellraw</button>

<h2>Output:</h2>
<div id="output"></div>

<script>
const colorMap = {
  '0': 'black',     '1': 'dark_blue',   '2': 'dark_green', '3': 'dark_aqua',
  '4': 'dark_red',  '5': 'dark_purple', '6': 'gold',       '7': 'gray',
  '8': 'dark_gray', '9': 'blue',        'a': 'green',      'b': 'aqua',
  'c': 'red',       'd': 'light_purple','e': 'yellow',     'f': 'white'
};

function generateTellraw() {
  const input = document.getElementById('inputText').value;
  const output = [];
  let current = { text: "", color: "white" };
  let formats = { bold: false, italic: false, underlined: false, strikethrough: false };

  function pushCurrent() {
    if (current.text) {
      output.push({ ...current, ...formats });
      current.text = "";
    }
  }

  let i = 0;
  while (i < input.length) {
    if (input[i] === '&' && i + 1 < input.length) {
      const code = input[i + 1].toLowerCase();
      i += 2;

      if (colorMap[code]) {
        pushCurrent();
        current.color = colorMap[code];
        formats = { bold: false, italic: false, underlined: false, strikethrough: false };
      } else if (code === 'l') {
        formats.bold = true;
      } else if (code === 'o') {
        formats.italic = true;
      } else if (code === 'n') {
        formats.underlined = true;
      } else if (code === 'm') {
        formats.strikethrough = true;
      } else if (code === 'r') {
        pushCurrent();
        current.color = "white";
        formats = { bold: false, italic: false, underlined: false, strikethrough: false };
      } else {
        current.text += '&' + code;
      }
    } else {
      current.text += input[i++];
    }
  }
  pushCurrent();

  const tellraw = `/tellraw @a ${JSON.stringify({ text: "", extra: output })}`;
  document.getElementById("output").textContent = tellraw;
}
</script>

</body>
</html>
